
<html>
<head>
    <title>user1::register</title>
</head>

<script>
    window.onload = function () {
        const form = document.userForm;

        form.onsubmit = function (e) {

            e.preventDefault();
            const uid = form.uid.value;
            const name = form.name.value;
            const birth = form.birth.value;
            const hp = form.hp.value;
            const age = form.age.value;

            const jsonData = {
                "uid": uid,
                "name": name,
                "birth": birth,
                "hp": hp,
                "age": age
            }

            fetch(`/ch09/user1`,{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify(jsonData)
            })
                .then(response => response.json())
                .then(data=>{
                    if(data != null){
                        console.log(data)
                        alert('등록 되었습니다.');
                        location.href='/ch09/user1/list';
                    }
                }
             )
                .catch(err => console.log(err))

        }
    }
</script>
<body>
    <div><h3>user1 등록</h3></div>
    <div>
        <a th:href="@{/}">처음으로</a>
    </div>
    <form name="userForm">
        <table border="1px">
            <tr>
                <td>아이디</td>
                <td><input type="text" name="uid"></td>
            </tr>

            <tr>
                <td>이름</td>
                <td><input type="text" name="name"></td>
            </tr>

            <tr>
                <td>생년월일</td>
                <td><input type="date" name="birth"></td>
            </tr>

            <tr>
                <td>휴대폰</td>
                <td><input type="text" name="hp"></td>
            </tr>

            <tr>
                <td>나이</td>
                <td><input type="number" name="age"></td>
            </tr>
            <tr>
                <td colspan="2" align="right"><input type="submit" value="등록"></td>
            </tr>
        </table>
    </form>
</body>
</html>
